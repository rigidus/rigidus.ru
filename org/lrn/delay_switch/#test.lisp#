(ql:quickload "bordeaux-threads")

(defun foo1 ()
  (format t "~%~A" a))

(defun foo2 ()
  (let ((a "b"))
    (format t "~%~A" a))
  (format t "~%~A" a))

(defun foo3 ()
  (let ((a "a"))
    (declare (special a))
    (foo1)
    (bt:make-thread (lambda ()
                      (foo2))
                    :initial-bindings
                    `((*standard-output* . ,*standard-output*)
                      (a . ,a)))
    (sleep 1)))

(foo3)