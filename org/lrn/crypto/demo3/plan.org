#+STARTUP: showall indent hidestars

* Install

#+BEGIN_SRC sh
  sudo apt install curl
  curl -O https://beta.quicklisp.org/quicklisp.lisp
  curl -O https://beta.quicklisp.org/quicklisp.lisp.asc
  gpg --verify quicklisp.lisp.asc quicklisp.lisp
  sbcl --load quicklisp.lisp
  (quicklisp-quickstart:install)
  (ql:add-to-init-file)
  (quit)
  cd /home/rigidus/src/rigidus.ru/org/lrn/forth/src
  make -f Makefile64
#+END_SRC

Потом нужно экспортировать высокоуровневую форт-часть в jonesforth.f

После экспорта удалить инструкцию BYE, из jonesforth.f чтобы предотвратить выход из VFM

* Запуск нод
** Установление соединения
Это сеть, она распределенная
** Выбор G-нод, начало раунда
* Сценарий "Генерация транзакций"
Умеет одобрять транзакции, хранит их на девайсах
** Блоки
** Эпохи
* Сценарий "Вход новой ноды в сеть"
* Сценарий "Проблемы со связью"

Отключаем одну из нод из сети.

После включения она должна синхронизироваться.

* Сценарий "Атака 51"
* Сценарий "Атака Сивиллы"
* Смарт-контракт "Crowfundng"
** Схема контракта

[[file:../../../../img/crowdfunding.png]]

** Состояния контракта

[[file:../../../../img/crowdfunding-state.png]]

** Функция работы с состоянием

[[file:../../../../img/update-state.drn.png]]

** TODO Код функции работы с состоянием

#+BEGIN_SRC
#+END_SRC

** TODO Функция инвестирования
** TODO Код функции инвестирования

#+BEGIN_SRC
#+END_SRC

** TODO Фунция возврата денег
** TODO Код функции возврата денег
** TODO Функция перевода в случае успеха компании
** TODO Код функции перевода в случае успеха
** TODO Собираем все в один контракт
** TODO Поднимаем ноду
** Отправляем ей несколько блоков чтобы установить высоту
** TODO Публикуем контракт
** TODO Смотрим storage
** TODO Пытаемся сделать инвестирование до начала компании
** TODO Пытаемся вывести деньги до начала компании
** Добавляем высоту
** TODO Делаем инвестирование
** TODO Смотрим storage

Нужен explorer

** TODO Пытаемся вывести деньги до окончания компании
** TODO Заносим еще денег
** TODO Пытаемся вернуть деньги до окончания компании
** Добавляем высоты, чтобы компания закончилась
** TODO Пытаемся ввести деньги после окончания компании
** TODO Пробуем вывести деньги от имени левого кошелька
** TODO Пробуем вывести деньги автором контракта
** TODO Пробуем вывести деньги инвестором
** TODO Добавляем высоты чтобы кампания полность завершилась
** TODO Очищаем данные контракта и получаем деньги за это
* Смарт-котракты
** Деплой смарт-контракта
** Вызов смарт-контракта
* Стресс-тест
