<!DOCTYPE html>
<html>
<head>
<title>Обо мне</title>
<meta  charset="utf-8">
<meta  name="generator" content="Org-mode">
<meta  name="author" content="rigidus">
<link href="/css/style.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="content">
<h1 class="title">Обо мне</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#unnumbered-1">Краткая биография</a></li>
<li><a href="#unnumbered-2">Первые шаги</a>
<ul>
<li><a href="#unnumbered-3">Basic</a></li>
<li><a href="#unnumbered-4">JavaScript</a></li>
<li><a href="#unnumbered-5">Delphi</a></li>
<li><a href="#unnumbered-6">Ассемблер x86</a></li>
<li><a href="#unnumbered-7">C/C++</a></li>
</ul>
</li>
<li><a href="#unnumbered-8">Веб-программирование</a>
<ul>
<li><a href="#unnumbered-9">Первый коммерческий проект</a></li>
</ul>
</li>
<li><a href="#unnumbered-10">Лисп</a>
<ul>
<li><a href="#unnumbered-11">Побеждая посредственность</a></li>
<li><a href="#unnumbered-12">Лисп в индустрии</a></li>
<li><a href="#unnumbered-13">Столкновение с трудностями</a></li>
<li><a href="#unnumbered-14">Другие приложения</a></li>
</ul>
</li>
<li><a href="#unnumbered-15">Эрланг и Plan9</a>
<ul>
<li><a href="#unnumbered-16">Телекоммуникации</a></li>
<li><a href="#unnumbered-17">Трейдинговые системы</a></li>
</ul>
</li>
<li><a href="#unnumbered-18">ДРАКОН</a></li>
<li><a href="#unnumbered-19">Tcl</a></li>
<li><a href="#unnumbered-20">Электроника</a>
<ul>
<li><a href="#unnumbered-21">Моделирование цифровых схем</a></li>
<li><a href="#unnumbered-22">Робототехника и Forth</a></li>
</ul>
</li>
<li><a href="#unnumbered-23">Реализация других языков</a></li>
</ul>
</div>
</div>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#unnumbered-1">Краткая биография</a></li>
<li><a href="#unnumbered-2">Первые шаги</a>
<ul>
<li><a href="#unnumbered-3">Basic</a></li>
<li><a href="#unnumbered-4">JavaScript</a></li>
<li><a href="#unnumbered-5">Delphi</a></li>
<li><a href="#unnumbered-6">Ассемблер x86</a></li>
<li><a href="#unnumbered-7">C/C++</a></li>
</ul>
</li>
<li><a href="#unnumbered-8">Веб-программирование</a>
<ul>
<li><a href="#unnumbered-9">Первый коммерческий проект</a></li>
</ul>
</li>
<li><a href="#unnumbered-10">Лисп</a>
<ul>
<li><a href="#unnumbered-11">Побеждая посредственность</a></li>
<li><a href="#unnumbered-12">Лисп в индустрии</a></li>
<li><a href="#unnumbered-13">Столкновение с трудностями</a></li>
<li><a href="#unnumbered-14">Другие приложения</a></li>
</ul>
</li>
<li><a href="#unnumbered-15">Эрланг и Plan9</a>
<ul>
<li><a href="#unnumbered-16">Телекоммуникации</a></li>
<li><a href="#unnumbered-17">Трейдинговые системы</a></li>
</ul>
</li>
<li><a href="#unnumbered-18">ДРАКОН</a></li>
<li><a href="#unnumbered-19">Tcl</a></li>
<li><a href="#unnumbered-20">Электроника</a>
<ul>
<li><a href="#unnumbered-21">Моделирование цифровых схем</a></li>
<li><a href="#unnumbered-22">Робототехника и Forth</a></li>
</ul>
</li>
<li><a href="#unnumbered-23">Реализация других языков</a></li>
</ul>
</div>
</div>

<div id="outline-container-unnumbered-1" class="outline-2">
<h2 id="unnumbered-1">Краткая биография</h2>
<div class="outline-text-2" id="text-unnumbered-1">
<p>
Меня зовут Глухов Михаил, мой ник <code>rigidus</code> - его проще нагуглить. Я занимаюсь
программированием и исследованиями в смежных областях. В свободное время конструирую
роботов и программирую их.
</p>

<p>
Мне можно в любой момент позвонить по телефону <code>8(911)286-92-90</code> или написать на
<code>i.am.rigidus at gmail dot com</code>
</p>

<p>
Еще я постоянный участник (и иногда - докладчик) семинаров по функциональному
программированию в Санкт-Петербурге <a href="https://plus.google.com/communities/106931692847918217517">fprog-community</a> и <a href="http://piter-united.ru">IT-Global-Meetup</a>
</p>

<p>
Дальше будет моя би(бли)ография. Она почти целиком состоит из тех книг, которые меня
сформировали как программиста.
</p>
</div>
</div>

<div id="outline-container-unnumbered-2" class="outline-2">
<h2 id="unnumbered-2">Первые шаги</h2>
<div class="outline-text-2" id="text-unnumbered-2">
</div><div id="outline-container-unnumbered-3" class="outline-3">
<h3 id="unnumbered-3">Basic</h3>
<div class="outline-text-3" id="text-unnumbered-3">
<p>
Я стал программмировать в классе, если я не ошибаюсь, седьмом, мне было 12-13 лет. С
тех пор я занимаюсь этим практически без перерывов - даже в отпуске и путешествиях со
мной всегда ноутбук и если иногда и случаются дни без кода - это довольно редкое
явление.
</p>

<p>
Моим первым языком программирования был бейсик для компьютера <code>Sinclair48k</code>. Вот он:
</p>

<p>
<div class="figure"><img src="/img/ZXSpectrum48k.jpg" alt="nil"/><p></p></div>
</p>

<p>
Этот компьютер обладал оперативной памятью в 48 килобайт, а жесткого диска у него
вообще не было. Программы грузились с кассетного магнитофона, который давал сбои из-за
скачков напряжения в сети. Поэтому я просто набирал программы заново. Это было
божественно прекрасно, ведь недавно у меня вообще не было компьютера и я ходил
программировать в школьный компьютерный кружок, а там было слишком много других
желающих.
</p>
</div>
</div>

<div id="outline-container-unnumbered-4" class="outline-3">
<h3 id="unnumbered-4">JavaScript</h3>
<div class="outline-text-3" id="text-unnumbered-4">
<p>
Вторым моим языком программирования был <code>JScript</code> - вариант языка <code>JavaScript</code> для
броузера <code>Internet Explorer</code> версии 3.2. С тех пор, люди, проклинающие <code>Internet
Explorer</code> 8-ой версии вызывают у меня только улыбку.
</p>

<p>
На нем я попытался написать, конечно же, вебстраничку. Сложно сказать, зачем я это
делал, ведь интернет, даже диалапный появился у меня гораздо позже - наверное, просто
хотелось программировать, а <code>JScript</code> был доступен без установки компилятора, который я
тогда не знал где брать и как ставить - мне было 14 лет и у меня появился компьютер с
<code>Windows95</code> и <code>Internet Explorer</code>, который выглядел так:
</p>

<p>
<div class="figure"><img src="/img/ie3.png" alt="nil"/><p></p></div>
</p>

<p>
Википедии кстати тогда тоже еще не было (чего не скажешь по скриншоту). Среда
программирования была очень бедной - единственный способ для программы сохранить
какое-то данные - это записать их в cookies.
</p>
</div>
</div>

<div id="outline-container-unnumbered-5" class="outline-3">
<h3 id="unnumbered-5">Delphi</h3>
<div class="outline-text-3" id="text-unnumbered-5">
<p>
Возможность работать с файловой системой из программы (читать и сохранять файлы)
появилась, когда я начал использовать <code>Delphi</code>.
</p>

<p>
Ребенок из неполной семьи, живущий в пригороде, не может купить толстое руководство по
<code>Delphi</code> "в подлиннике", поэтому после учебы я ехал в "Дом Книги". Дорога занимала
полтора часа, в торговом зале стульев не было, но можно было почитать час-полтора, стоя
у стеллажа. А потом ехать домой - пробовать полученные знания. Продавщицы стали меня
узнавать - так я смог прочитать почти две тысячи страниц.
</p>

<p>
<div class="figure"><img src="/img/delphi4.jpg" alt="nil"/><p></p></div>
</p>

<p>
На <code>Delphi</code> я написал записную книжку - органайзер, который умел предупреждать меня о
днях рождения знакомых и показывала их на календаре. Еще она хранила их телефоны и
делала еще много разных вещей. Я определенно мог гордиться собой..
</p>
</div>
</div>

<div id="outline-container-unnumbered-6" class="outline-3">
<h3 id="unnumbered-6">Ассемблер x86</h3>
<div class="outline-text-3" id="text-unnumbered-6">
<p>
..пока не повстречался с одним более старшим коллегой-программистом. Он работал в
конторе, которая делала устройства для рекламы под управлением микроконтроллев. Он
сообщил мне, что <code>Delphi</code> - это для детей, а настоящие программисты программируют на
Ассемблере. Книжный магазин уже ждал меня&#x2026;
</p>

<p>
<div class="figure"><img src="/img/assembler3books.jpg" alt="nil"/><p></p></div>
</p>

<p>
Ассемблер был куда сложнее, но отступать было некуда. Много позже я понял, что коллега,
скорее всего, имел ввиду куда более простой ассемблер для микроконтроллеров PIC, но
тогда я этого не знал, и к счастью: мне пришлось изучить регистры процессора и режимы
адресации, способы написания резидентных программ под MS-DOS, научиться писать в порты
и читать из них, чтобы управлять устройствами без драйверов, и даже переводить
процессор в защищенный режим.
</p>

<p>
На одном из дисков с пиратским софтом мне попались электронные журналы демомейкеров
(интернета пока еще не было). Я смог немного прикоснусться к демо-сцене, реверсингу и
анализу всяческих кряков.
</p>

<p>
<div class="figure"><img src="/img/ezine.png" alt="nil"/><p></p></div>
</p>

<p>
Это было совершенно волшебно. Я писал на ассемблере, и делфи, изучал защиты программ,
антиотладочные приемы, и даже не думал, что все это может быть интересно кому-то еще,
кроме меня и загадочных авторов книг и электронных журналов.
</p>

<p>
Пожалуй самым высоким достижением на этом пути было написание собественной операционной
системы защищенного режима. Она имела загрузчик, размещенный в Master Boot Record
дискеты, который прямым обращением к контроллеру дисковода умел загружать собственно
операционную систему.
</p>

<p>
После загрузки с дискеты она переходила в защищенный режим, инициализировала GDI и LDI
(глобальную и локальную дескрипторные таблицы, содержащие дескрипторы сегментов) и
таблицу векторов прерываний. С помощью прерываний обрабатывалась мышь, которую можно
было использовать для операций внутри простой оконной подсистемы и запускать
приложения. Приложений было три, все они работали в SVGA-режиме и представляли собой
простые игры: "змейка", "арканоид" и несколько упрощенный "диггер".
</p>

<p>
Все это занимало меня в 16-17 лет, и это было весьма интересно.
</p>
</div>
</div>

<div id="outline-container-unnumbered-7" class="outline-3">
<h3 id="unnumbered-7">C/C++</h3>
<div class="outline-text-3" id="text-unnumbered-7">
<p>
<div class="figure"><img src="/img/cman.jpg" alt="nil"/><p></p></div>
</p>

<p>
После практики программирования на ассемблере, язык Си, который я изучал по
классическому руководству Кернигана и Ритчи, был понятен и привычен. Работа с
указателями, построение сложных структур данных и алгоритмов стали гораздо проще
записываться и быстрее читаться. Было довольно приятно посвятить некоторое время работе
с этим языком.
</p>

<p>
<div class="figure"><img src="/img/cppman.jpg" alt="nil"/><p></p></div>
</p>

<p>
Начав, через некоторое время изучать С++ я обнаружил, что это совсем другой язык, с
другой идеологией и практикой применения. Я уже был знаком с ООП на примере <code>Delphi</code>
(как я тогда думал), и даже ухитрялся реализовывать его в ассемблерных программах, в
качестве развлечения.
</p>

<p>
Было очень интересно, как именно все реализовано в C++: таблицы виртуальных функций,
порядок вызова деструкторов и тому подобные вещи занимали все мои мысли. С++ казался
очень мощным и довольно непростым - сколько бы не уходило времени на его изучение, я не
мог сказать с уверенностью, что я "знаю" этот язык - всегда были вещи, которые могли
поставить в тупик. Так что я продолжал тратить все больше времени на изучение С++. Я
легко мог себе это позволить - я был школьником, посвящавшим все свободное время
программированию.
</p>
</div>
</div>
</div>

<div id="outline-container-unnumbered-8" class="outline-2">
<h2 id="unnumbered-8">Веб-программирование</h2>
<div class="outline-text-2" id="text-unnumbered-8">
</div><div id="outline-container-unnumbered-9" class="outline-3">
<h3 id="unnumbered-9">Первый коммерческий проект</h3>
<div class="outline-text-3" id="text-unnumbered-9">
<p>
..я сделал для фирмы, которая торговала авточехлами и автоинструментом. Увидев, как я
обрабатываю ему фотку в фотошопе, директор конторы спросил, не мог бы я ему сделать
сайт? Почему бы не попробовать? Программирование на PHP и JavaScript) было гораздо
проще С++ и Ассемблера.
</p>

<p>
Бум доткомов докатился до нас - внезапно всем стали нужны сайты. Много людей были
готовы дать денег за то, что я бы с удовольствием делал бы и бесплатно. Мне просто
повезло - на пустом рынке я оказался одним из немногих опытных специалистов.
</p>

<p>
Сделав сайт паре фирм, я устроился на работу веб-программистом в веб-студию. Весь код
был в таком ужасном состоянии, что я просто взял и переписал их CMS-движок и быстро
стал тимлидом. Тогда было модно так делать - у каждой конторы была своя CMS, которая
разрабатывалась под "Денвером" - сборкой Apache и MySQL для Windows, а потом заливалась
через FTP на сервера.
</p>

<p>
Можно было бы гордиться собой, но тут я узнал о существовании Лиспа.
</p>
</div>
</div>
</div>

<div id="outline-container-unnumbered-10" class="outline-2">
<h2 id="unnumbered-10">Лисп</h2>
<div class="outline-text-2" id="text-unnumbered-10">
</div><div id="outline-container-unnumbered-11" class="outline-3">
<h3 id="unnumbered-11">Побеждая посредственность</h3>
<div class="outline-text-3" id="text-unnumbered-11">
<p>
Я прочитал <a href="http:www.nestor.minsk.by/sr/2003/07/30710.html">эссе Пола Грэма "Побеждая посредственность"</a> и оно произвело на меня
неизгладимое впечатление. Захотелось срочно попробовать Лисп. Я уже считал себя опытным
разработчиком, поэтому, чтобы процесс проходил веселее, решил поменять не только язык
программирования, но и среду разработки и даже операционную систему. Так у меня в
компьютере оказался Линукс, в нем Емакс, а в Емаксе - Лисп.
</p>

<p>
Добро пожаловать обратно в школу - весь предыдущий опыт больше не работал - я снова не
мог написать ни одной программы.
</p>

<p>
Впрочем, проведя два месяца, я все-таки начал что-то понимать. Я даже попытался
написать свой собственный Лисп для использования в веб-студии, но этот проект не был
оценен по достоинству - у них уже была написанная мной CMS, которая приносила неплохой
доход, и никто не хотел менять ее на нечто совершенно новое, сырое, и незнакомое.
</p>

<p>
Вся работа свелась к поддержке моей CMS, найму программистов и написанию модулей время
от времени. Я стал искать карьерные перспективы. С собеседованиями было сложно - я
выглядел слишком молодо для программиста со знанием ассемблера, С++, PHP и
JavaScript. Пришлось отрастить бороду, и стереть из резюме упоминания о ассемблере, С++
и возрасте - и тогда дело пошло.
</p>
</div>
</div>

<div id="outline-container-unnumbered-12" class="outline-3">
<h3 id="unnumbered-12">Лисп в индустрии</h3>
<div class="outline-text-3" id="text-unnumbered-12">
<p>
Я стал искать компанию, в которой мог бы применить свежеполученные mad skillz). И
нашел. Это был интернет-магазин, написанный на PHP и довольно плохо справлявшийся с
нагрузкой. Код был плохим. Впереди были новогодние праздники, главная страница
временами открывалась 28 секунд и настроение у боссов было скверным. Предыдущий
кандидат на мое место после первого дня работы тихо исчез, не оставив контактов.
</p>

<p>
Я предложил переписать все на Лиспе, а в качестве демонстрации способностей закешировал
самые тяжелые вещи и главная страница стала открываться за 4 секунды. Быстрее было уже
никак, все равно пришлось бы переписывать все, так почему бы и не на Лиспе?
</p>

<p>
Руководство магазина идею поддержало с оговоркой - деньги за работу будут заплачены
только в том случае, если 90% текущего функционала будут работать и не тормозить. Но
меня уже было не остановить..
</p>
</div>
</div>

<div id="outline-container-unnumbered-13" class="outline-3">
<h3 id="unnumbered-13">Столкновение с трудностями</h3>
<div class="outline-text-3" id="text-unnumbered-13">
<p>
Оказалось, что я на самом деле не знал Лисп и что он гораздо сложнее и интереснее чем
мне представлялось на первый взгляд. В процессе разработки мне пришлось узнать довольно
многое - я читал <a href="resources/sicp.pdf">SICP</a> и <a href="resources/pcl.pdf">PCL</a>, а <a href="resources/emacs-man.pdf">руководство пользователя Emacs</a>, вообще стало настольной
книгой. Это было сложно, но очень интересно.
</p>

<p>
Через 2 месяца система в общих чертах была готова, и я получил свои деньги, а
руководство фирмы - результат. Все страницы открывалсись моментально, и даже быстрее
чем у конкурентов. Это было неудивительно, если вспомнить, что моя реализация Лиспа
компилировалась прямо в машинный код, а у PHP четвертой версии не было ничего
подобного. Впрочем, там вообще ничего не было: PHP был <a href="https:habrahabr.ru/post/179399/">создан умирать</a> и хранил все
данные в БД.
</p>

<p>
В новой системе, написанной на Лиспе, почти все необходимые данные постоянно были
загружены в памяти процесса и отдавались с молниеносной скоростью, независимо от
нагрузки.
</p>

<p>
Благодаря REPL я видел и исправлял ошибки пользователей прямо в момент их
возникновения. Иногда даже до того, как компоненты страницы окончательно были загружены
в броузер пользователя.
</p>

<p>
Я обучил еще одного программиста и мы стали работать над проектом вдвоем. Кажется, я
даже ушел в отпуск - очень необычные ощущения.
</p>

<p>
Я стал самым могущественным веб-программистом, ведь в моих руках было секретное оружие,
о котором никто не знал - Лисп!
</p>
</div>
</div>

<div id="outline-container-unnumbered-14" class="outline-3">
<h3 id="unnumbered-14">Другие приложения</h3>
<div class="outline-text-3" id="text-unnumbered-14">
<p>
Я начал думать на Лиспе. Разумеется, мне приходилось делать проекты и на других языках,
но первый прототип делался (а часто и показывался) на Лиспе. Благодаря его гибкости, я
успевал вносить правки в проект прямо во время совещаний - к их концу часто уже все
бывало готово.
</p>

<p>
Однако я обнаружил, что люди странно реагируют, если им показывать изменения сразу -
один коллега программист однажды даже возмущенно сказал, что "это не должно быть
настолько легко!"
</p>

<p>
Окей, подумал я, и стал брать "недельку на доработки", ведя одновременно несколько
проектов. Это было несложно - корпоративные порталы, интернет-магазины,
баннерно-рекламные сети шли бесконечной чередой. Это было доходно, но хотелось чего-то
большего - я скучал по настоящей работе и самоотверженному изучению чего-то нового,
более мощного..
</p>
</div>
</div>
</div>

<div id="outline-container-unnumbered-15" class="outline-2">
<h2 id="unnumbered-15">Эрланг и Plan9</h2>
<div class="outline-text-2" id="text-unnumbered-15">
</div><div id="outline-container-unnumbered-16" class="outline-3">
<h3 id="unnumbered-16">Телекоммуникации</h3>
<div class="outline-text-3" id="text-unnumbered-16">
<p>
Возможность поработать на незнакомом языке представилась довольно скоро и я окунулся в
Эрланг. С функциональным программированием я был знаком и раньше, но впервые у меня
появилась необходимость делать по-настоящему распределенные системы.  Не все шло
гладко - мне опять не хватало знаний и снова мне помог "Дом Книги" (кажется, ему надо
продать спонсорство этой статьи), где я купил "Распределенные системы"
Таненбаума. Теперь я больше мог не стоять в магазине, а взять книгу домой.
</p>

<p>
<div class="figure"><img src="/img/distr-sys.png" alt="nil"/><p></p></div>
</p>

<p>
Несмотря на то, что она совсем не про Эрланг, думаю это одна из важнейших книг для
каждого разработчика. Эрланг будил смешанные чувства: в нем были хорошо сделаны сложные
для Лиспа вещи (многопоточность), и ужасно плохо другие (горячая замена кода), которые
в Лиспе как раз хороши. Для того чтобы понять, чем вдохновлялись авторы языка я начал
читать "Взаимодействующие последовательные процессов" Хоара.
</p>

<p>
<div class="figure"><img src="/img/hoar.jpg" alt="nil"/><p></p></div>
</p>

<p>
Рядом на полке стояла вся серия "Классика Computer Science" и меня заинтересовала еще
одна книжка Таненбаума - "Операционные системы - разработка и реализация". Ее я тоже
купил, просто невозможно было пройти мимо. Наверно именно тогда зародилась идея о
распределенной операционной системе. Вот было бы здорово написать такое&#x2026; Но,
оказалось, что я - не первый кто об этом задумался.
</p>

<p>
И действительно, ребята из <code>Bell Labs</code>, сделавшие в свое время <code>UNIX</code>, решили начать с
"чистого листа" и разработали <a href="https://ru.wikibooks.org/wiki/Plan9">Plan9</a>. О котором, кстати, никто не знает, несмотря на то,
что идеи, заложенные в него остаются революционными и сейчас, спустя почти 40 лет.
</p>

<p>
Создатели <code>Plan9</code> планировали сделать из своего продукта коммерческую операционную
систему, и исходные тексты долгое время были закрыты. В то время, как <code>Linux</code> был
полностью открыт и вокруг него формировалось сообщество разработчиков. Вполне
естественно, что бизнес при выборе операционной системы ориентировался на стоимость
поддержки, прямо зависящую от количества компетентных специалистов на рынке. Таким
образом, когда исходные тексты <code>Plan9</code> были, наконец, открыты - оказалось уже
поздно. Тем не менее, эта операционная система осталась колодцем, из которого еще очень
долго можно черпать идеи. Некторые из этих идей очень хорошо подходят к моим задачам,
но я понимаю, что эти идеи никогда не будут так стройно увязаны в одну систему как в
<code>Plan9</code>.
</p>

<p>
Начав изучать ее устройство, я понял, что мы просто живем в каменном веке операционных
систем. Я потратил довольно много времени на исследование и анализ механизмов, которые
так гениально спроектированы в <code>Plan9</code>.
</p>
</div>
</div>

<div id="outline-container-unnumbered-17" class="outline-3">
<h3 id="unnumbered-17">Трейдинговые системы</h3>
<div class="outline-text-3" id="text-unnumbered-17">
<p>
Следующий мой проект был связан с торговлей на бирже. Там были очень жесткие требования
по производительности и времени выполнения операций. Я довольно быстро написал прототип
на лиспе и он, после некоторого количества расширений, вполне устраивал начальника. Но,
когда я попробовал испытать его на серьезной нагрузке, скорость оказалась
недостаточной. Причиной являлась модель многопототочности в той реализации Лиспа,
которую я использовал. В ней (в отличии от Эрланга) создание потоков - достаточно
дорогая операция. В фирме уже работало несколько эрланг-программистов, да и я
первоначально нанимался на эту позицию, поэтому вариантов выбора было
немного. "Переходим на Эрланг" - сказал босс, и я понял что переписывание всего кода
(его было уже немало) на Эрланг займет слишком много времени.
</p>

<p>
Я решил написать кодогенератор, который сделает это за меня. Задача была сложной и
рискованной, но очень интересной. В процессе разработки прототипа у нас
выкристализовался своего рода "язык предметной области", связанной с биржей, поэтому на
самом деле мне пришлось сделать кодогенерацию этого ограниченного подмножества. Я также
старался, чтобы сгенерированный код был не лапшой, в которой тяжело разобраться, а был
достаточно поддерживаемым и идиоматичным, чтобы любой эрланг-программист не отличил бы
его от написанного человеком.
</p>

<p>
Разработка кодогенератора заняла почти два месяца - это была новая и незнакомая
задача. Затем мы переехали на Эрланг, наняли еще несколько программистов и далее в
проекте остался только Эрланг и С++.
</p>

<p>
После успешного опыта с кодогенерацией я заинтересовался тем, как работают
кодогенераторы в известных языках программирования и их компиляторах. Сначала изучал их
исходные тексты, а потом на форуме мне порекомендовали прочесть "<a href="resources/compilers.djvu">Книгу Дракона</a>" -
классический учебник по теории построения компиляторов. После предыдущих опытов эта
книга читалась как захватывающий детектив.
</p>

<p>
<div class="figure"><img src="/img/drakon.png" alt="nil"/><p></p></div>
</p>
</div>
</div>
</div>

<div id="outline-container-unnumbered-18" class="outline-2">
<h2 id="unnumbered-18">ДРАКОН</h2>
<div class="outline-text-2" id="text-unnumbered-18">
<p>
Я решил, что кодогенерацию вполне можно поставить на коммерческие рельсы и написал
"язык для разработки сайтов", очень похожий на Лисп, который генерировал код на <code>PHP</code> и
<code>JavaScript</code> (с использованием <code>JQuery</code>) под основные распространенные фреймворки:
<code>Symphony</code>, <code>Yii</code> и даже <code>Wordpress</code>.
</p>

<p>
Некоторое время я применял и улучшал этот язык для выполнения множества проектов, но я
обнаружил, что почти никто, кроме меня не хочет им пользоваться, несмотря на простоту и
"заточенность" под типовые задачи. Программистов отпугивал непривычный синтаксис Лиспа,
а пользователи-непрограммисты предпочитали рисовать картинки, отдаленно напоминавшие
блок-схемы, а потом отдавать их мне, чтобы я запрограммировал логику.
</p>

<p>
Что-то тут было не так. Я стал задумываться об инструменте "визуального
программирования", который можно было бы отдать пользователю, чтобы он сам мог создать
алгоритм. Хотелось дать возможность пользователям создавать блок-схемы для решения
своих задач, а мой генератор по ним мог бы создать код и вставить его в типовой
фреймворк, вроде <code>Yii</code>. И я нашел подходящий инструмент для этой цели - <a href="https://ru.wikipedia.org/wiki/%D0%94%D0%A0%D0%90%D0%9A%D0%9E%D0%9D">ДРАКОН</a>. Он
представляет собой визуальный язык для создания блок-схем, достаточно формализованный,
чтобы была возможность кодогенерации из таких схем. И достаточно понятный, чтобы быстро
научить даже непрограммиста, знакомого только с понятием алгоритма.
</p>

<p>
Вот так <code>ДРАКОН-схема</code> выглядит (картинка с одного из сайтов, посвященных языку, сам я
стараюсь использовать <code>git</code> для управления кодом)
</p>

<p>
<div class="figure"><img src="/img/drakon-svn-ds.png" alt="nil"/><p></p></div>
</p>

<p>
Я с некоторым успехом применил такие схемы для формализации технических заданий, пока
работал в фирме, которая продавала авиа и железнодорожные билеты. В этой отрасли
взаимодействие между системам бронирования и клиентской платформой может быть весьма
нетривиальным.
</p>

<p>
Для <code>ДРАКОН-а</code> существует несколько редакторов таких схем. Я выбрал кроссплатформенный,
который называется <a href="http://drakon-editor.sourceforge.net/">DRAKON Editor</a>. И в нем уже есть кодогенерация, для нескольких
языков:
</p>
<ul class="org-ul">
<li>C и C++ (включая расширения языка из фреймворка Qt)
</li>
<li>Java (а также её подмножество для компьютерной графики — Processing.org)
</li>
<li>C#
</li>
<li>Python (версии 2.х и 3.х)
</li>
<li>Tcl
</li>
<li>JavaScript
</li>
<li>Erlang
</li>
<li>Lua
</li>
</ul>

<p>
Я подумал, что будет не очень сложно добавить кодогенерацию и для моего лисп-подобного
языка разработки веб-сайтов. Оказалось, <code>Drakon Editor</code> написан на <code>Tcl</code>, поэтому чтобы
расширить его - необходимо выучить еще один язык. Еще один язык программирования, да
еще и с поддержкой метапрограммирования? Звучит как отличная идея!
</p>
</div>
</div>

<div id="outline-container-unnumbered-19" class="outline-2">
<h2 id="unnumbered-19">Tcl</h2>
<div class="outline-text-2" id="text-unnumbered-19">
<p>
Так что я приступил к изучению <code>Tcl</code> и <code>Tk</code>. В этом мне помогла замечательная книга:
</p>

<p>
<div class="figure"><img src="/img/tcl-tk.jpg" alt="nil"/><p></p></div>
</p>

<p>
Язык оказался очень интересным и необычным и мне очень понравился возможностью
посмотреть на программирование под другим углом. Кроме того на нем удобно и быстро
прототипировать GUI (кроссплатформенно). Поэтому его используют в пакетах разработки
микросхем.
</p>

<p>
В общем я увлекся и это закономерным образом привело меня к задачам моделирования
цифровых электрических цепей.
</p>
</div>
</div>

<div id="outline-container-unnumbered-20" class="outline-2">
<h2 id="unnumbered-20">Электроника</h2>
<div class="outline-text-2" id="text-unnumbered-20">
</div><div id="outline-container-unnumbered-21" class="outline-3">
<h3 id="unnumbered-21">Моделирование цифровых схем</h3>
<div class="outline-text-3" id="text-unnumbered-21">
<p>
Первоначальное введение в цифровую схемотехнику я нашел в <a href="resources/sicp.pdf">SICP</a>, где рассказывалось, как
языковыми средствами построить язык предметной области (DSL), на котором можно написать
программу, ведущую себя в точности как электронная схема.
</p>

<p>
<div class="figure"><img src="/img/sicp.jpg" alt="nil"/><p></p></div>
</p>

<p>
Такой подход позволяет использовать технологии программмирования для построения
электроники. Да и выглядит очень необычно, и захватывающе. Так что я решил перечитать
<a href="resources/sicp.pdf">SICP</a>, чтобы превратить его из учебного примера в работающую технологию.
</p>

<p>
<div class="figure"><img src="/img/semiadder.png" alt="nil"/><p></p></div>
</p>

<p>
В процессе этой работы оказалось, что электронные схемы - это не просто математическая
абстракция, поэтому пришлось взяться сначала за физику, а потом и за схемотехнику
всерьез:
</p>

<p>
<div class="figure"><img src="/img/horovits_hill.jpg" alt="nil"/><p></p></div>
</p>

<p>
Книжка оказалась очень емкой, поэтому я возвращаюсь к ней по мере возникновения
трудностей.
</p>

<p>
Для проверки всех этих идей мне пришлось научиться разводить платы и даже делать их с
помощью лазерного принтера и утюга (и для разнообразия - фоторезиста). Удалось
попробовать разные микроконтроллеры - и тут очень удачно пригодился ассемблер и Си. Я
начал с изготовления самодельных устройств для "умного дома", но хотелось чего-то
большего.
</p>
</div>
</div>

<div id="outline-container-unnumbered-22" class="outline-3">
<h3 id="unnumbered-22">Робототехника и Forth</h3>
<div class="outline-text-3" id="text-unnumbered-22">
<p>
Я устроился в фирму, где смог найти применение этим навыкам. Однажды нам передали в
разработку устройство, прошивка которого была по-настоящему интересной. При скромных
аппаратных требованиях устройство удивляло своей могучей функциональностью. Требовалось
извлечь из него программу, разобраться в ее работе, и добавить возможность управления
по беспроводному каналу.
</p>

<p>
После извлечения прошивки, оказалось, что устройство не запрограммировано на Си, как
большинство из встречавшихся ранее. Вместо этого в нем сидит виртуальная машина,
написанная на ассемблере и эта виртуальная машина содержит в себе реализацию
неизвестного мне ранее языка программирования <code>Forth</code>.
</p>

<p>
Он произвел на меня впечатление своей компактностью и мощностью, поэтому я стал изучать
<code>Forth</code> в свободное время. По нему не очень много руководств, но некоторые из них
весьма хороши.
</p>

<p>
<div class="figure"><img src="/img/thinking-forth.jpg" alt="nil"/><p></p></div>
</p>

<p>
Виртуальная машина <code>Forth</code> и ее, хм.. "байткод" обладает очень важным свойством - по
байткоду может быть легко восстановлен исходный текст программы. Поэтому после того,
как архитекура <code>ForthVM</code> стала понятна (и я научился программировать на этом языке) я
смог провести полный реверс-инжиниринг прошивки и даже воссоздать его работу на более
современной элементной базе - пришлось портировать только низкоуровневую <code>ForthVM</code>.
</p>

<p>
Опираясь на несколько прочитанных руководств, я написал свою реализацию этого языка
(она опубликована на этом сайте). Я также думаю, что эта реализация может служить
своего рода "портабельным слоем" для других языков, которые я захочу реализовать.
</p>

<p>
Я использую эту реализацию не только в исследовательских целях - на ней сделано
несколько устройств "умный дом" - сигнализация, управление светом, электронные
замки. При этом уровень виртуальной машины полностью портируемый - я могу разрабатывать
программы для устройств, не нуждаясь в стенде до стадии окончательных испытаний.
</p>
</div>
</div>
</div>

<div id="outline-container-unnumbered-23" class="outline-2">
<h2 id="unnumbered-23">Реализация других языков</h2>
<div class="outline-text-2" id="text-unnumbered-23">
<p>
Чтобы изучить создание языков программирования "на практике", я взялся реализовывать
лисп (как наиболее сложный из известных мне) на форте (для переносимости). В ходе этого
проекта будет реализован диалект, с несколькими отличиями (в лучшую сторону) от
известных мне реализаций.
</p>

<p>
Я рассчитываю, что подобная практика даст навыки, которые пригодятся при реализации
многих других языков.
</p>
</div>
</div>
</div>
</body>
</html>
